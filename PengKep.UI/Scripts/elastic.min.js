"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="monospaced.elastic"),angular.module("monospaced.elastic",[]).constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(e,t,o){"use strict";return{require:"ngModel",restrict:"A, C",link:function(r,n,i,a){var l=n[0],d=n;if("TEXTAREA"===l.nodeName&&t.getComputedStyle){d.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var s=l.value;l.value="",l.value=s;var p,u,g=i.msdElastic?i.msdElastic.replace(/\\n/g,"\n"):o.append,h=angular.element(t),c="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",y=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+c+'"/>').data("elastic",!0),m=y[0],b=getComputedStyle(l),f=b.getPropertyValue("resize"),w="border-box"===b.getPropertyValue("box-sizing")||"border-box"===b.getPropertyValue("-moz-box-sizing")||"border-box"===b.getPropertyValue("-webkit-box-sizing")?{width:parseInt(b.getPropertyValue("border-right-width"),10)+parseInt(b.getPropertyValue("padding-right"),10)+parseInt(b.getPropertyValue("padding-left"),10)+parseInt(b.getPropertyValue("border-left-width"),10),height:parseInt(b.getPropertyValue("border-top-width"),10)+parseInt(b.getPropertyValue("padding-top"),10)+parseInt(b.getPropertyValue("padding-bottom"),10)+parseInt(b.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},x=parseInt(b.getPropertyValue("min-height"),10),v=parseInt(b.getPropertyValue("height"),10),V=Math.max(x,v)-w.height,P=parseInt(b.getPropertyValue("max-height"),10),z=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];d.data("elastic")||(P=P&&P>0?P:9e4,m.parentNode!==document.body&&angular.element(document.body).append(m),d.css({resize:"none"===f||"vertical"===f?"none":"horizontal"}).data("elastic",!0),l.oninput="onpropertychange"in l&&"oninput"in l?l.onkeyup=E:E,h.bind("resize",$),r.$watch(function(){return a.$modelValue},function(e){$()}),r.$on("elastic:adjust",function(){I(),$()}),e(E,0,!1),r.$on("$destroy",function(){y.remove(),h.unbind("resize",$)}))}function I(){var e=c;p=l,b=getComputedStyle(l),angular.forEach(z,function(t){e+=t+":"+b.getPropertyValue(t)+";"}),m.setAttribute("style",e)}function E(){var t,o,n,i,a;p!==l&&I(),u||(u=!0,m.value=l.value+g,m.style.overflowY=l.style.overflowY,t=""===l.style.height?"auto":parseInt(l.style.height,10),"px"===(o=getComputedStyle(l).getPropertyValue("width")).substr(o.length-2,2)&&(i=parseInt(o,10)-w.width,m.style.width=i+"px"),(n=m.scrollHeight)>P?(n=P,a="scroll"):n<V&&(n=V),n+=w.height,l.style.overflowY=a||"hidden",t!==n&&(r.$emit("elastic:resize",d,t,n),l.style.height=n+"px"),e(function(){u=!1},1,!1))}function $(){u=!1,E()}}}}]);